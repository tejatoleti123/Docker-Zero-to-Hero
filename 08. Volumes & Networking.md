# 08. Volumes & Networking

In the previous section, we built and published our custom image to Docker Hub.

Now we need to understand something critical:

Containers are ephemeral by default.

When a container is removed, any data inside it is lost.

To build real-world applications, we must understand:

- How to persist data
- How containers communicate

This section covers Docker Volumes and Networking.

---

# ğŸ“¦ Why Containers Lose Data

When you run a container, it gets its own writable layer.

If you:

    docker rm <container_id>

That writable layer disappears.

Any files created inside the container are lost.

This is why we need persistent storage.

---

# ğŸ’¾ Docker Volumes

A Docker volume is a special storage mechanism that:

- Persists data outside the container
- Survives container removal
- Can be shared between containers

Volumes are managed by Docker.

---

## ğŸ”¹ Create a Named Volume

    docker volume create my-volume

List volumes:

    docker volume ls

---

## ğŸ”¹ Use Volume in a Container

Example:

    docker run -d \
      -p 8080:80 \
      -v my-volume:/usr/share/nginx/html \
      nginx

Explanation:

- `-v my-volume:/path`  
- Left side â†’ Volume name  
- Right side â†’ Container directory  

Now data written to that directory persists even if the container is removed.

---

## ğŸ”¹ Inspect a Volume

    docker volume inspect my-volume

This shows:

- Mount location on host
- Metadata

---

# ğŸ“ Bind Mounts

Bind mounts map a specific host directory into a container.

Example:

    docker run -d \
      -p 8080:80 \
      -v $(pwd):/usr/share/nginx/html \
      nginx

This links the current host directory to the container directory.

Difference from volumes:

Volumes:
- Managed by Docker
- Recommended for production

Bind mounts:
- Direct host path mapping
- Useful for development

---

# ğŸŒ Docker Networking

By default, Docker creates a bridge network.

Containers connected to the same network can communicate using container names.

---

## ğŸ”¹ List Networks

    docker network ls

You will typically see:

- bridge
- host
- none

---

## ğŸ”¹ Bridge Network (Default)

When you run:

    docker run nginx

It attaches to the default bridge network.

Containers on the same bridge network can communicate.

---

## ğŸ”¹ Create a Custom Network

    docker network create my-network

Run two containers in the same network:

    docker run -d --name container1 --network my-network nginx
    docker run -d --name container2 --network my-network nginx

Now container1 can reach container2 using its name.

Example inside container:

    ping container2

Docker provides internal DNS resolution.

---

# ğŸŒ Port Mapping Recap

When exposing services externally:

    docker run -p 8080:80 nginx

Format:

    -p host_port:container_port

Without port mapping, the container is isolated from the host network.

---

# ğŸ§  Networking Modes Overview

Docker supports multiple networking modes:

Bridge:
- Default
- Isolated container network

Host:
- Container shares host network
- No port mapping needed

None:
- No networking

Bridge mode is most commonly used.

---

# ğŸ§  Key Takeaways

- Containers are ephemeral by default.
- Volumes provide persistent storage.
- Bind mounts map host directories.
- Docker networks allow container-to-container communication.
- Custom networks enable DNS-based service discovery.
- Port mapping exposes services externally.

Understanding volumes and networking is essential for real-world applications.

---

## ğŸ”œ Next Step

Now that we understand storage and networking, we move to advanced image optimization techniques.

ğŸ‘‰ [09. Multi Stage Builds & Distroless Images](./09.%20Multi%20Stage%20Builds%20%26%20Distroless%20Images.md)

In the next section, we will learn:

- How to reduce image size
- How multi-stage builds work
- What distroless images are
- How to improve container security
